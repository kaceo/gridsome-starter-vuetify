{"remainingRequest":"/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3/node_modules/babel-loader/lib/index.js??ref--1-1!/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3/node_modules/gridsome/app/components/Image.js","dependencies":[{"path":"/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3/node_modules/gridsome/app/components/Image.js","mtime":1547622922997},{"path":"/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3/node_modules/cache-loader/dist/cjs.js","mtime":1544326630000},{"path":"/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3/node_modules/babel-loader/lib/index.js","mtime":1547551806025}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.initImageObserver = initImageObserver;\nexports.observe = observe;\nexports.unobserve = unobserve;\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _vue = _interopRequireDefault(require(\"vue\"));\n\nvar _caniuse = _interopRequireDefault(require(\"../utils/caniuse\"));\n\nvar _intersectionObserver = require(\"../utils/intersectionObserver\");\n\nvar observer = _caniuse.default.IntersectionObserver ? (0, _intersectionObserver.createObserver)(intersectionHandler) : null;\nvar _default = {\n  functional: true,\n  props: {\n    src: {\n      type: [Object, String],\n      required: true\n    },\n    width: {\n      type: String\n    },\n    height: {\n      type: String\n    },\n    fit: {\n      type: String\n    },\n    position: {\n      type: String\n    },\n    background: {\n      type: String\n    },\n    alt: {\n      type: String\n    },\n    immediate: {\n      type: true\n    },\n    quality: {\n      type: String\n    },\n    blur: {\n      type: String // responsive: true\n      // grayscale: false\n      // duotone: false\n      // rotate: 0\n      // transition-name?\n      // transition-duration?\n\n    }\n  },\n  render: function render(h, _ref) {\n    var _attrs;\n\n    var data = _ref.data,\n        props = _ref.props,\n        parent = _ref.parent;\n    var isDev = process.env.NODE_ENV === 'development';\n    var isLazy = typeof props.immediate === 'undefined';\n    var classNames = (data.class || []).concat(['g-image']);\n    var noscriptClassNames = classNames.slice();\n    var srcType = (0, _typeof2.default)(props.src);\n    var ref = data.ref || data.key;\n    var res = [];\n    var src = '';\n    var sizes = '';\n    var dataUri = '';\n    var srcset = [];\n    var size = {\n      width: props.width\n    };\n\n    if (srcType === 'string') {\n      src = props.src;\n    } else if (srcType === 'object') {\n      src = props.src.src;\n      if (props.src.srcset) srcset = props.src.srcset;\n      if (props.src.sizes) sizes = props.src.sizes;\n      if (props.src.size) size = props.src.size;\n      if (props.src.dataUri) dataUri = props.src.dataUri;\n    }\n\n    res.push(h('img', (0, _objectSpread2.default)({}, data, {\n      ref: ref,\n      class: classNames,\n      attrs: (_attrs = {\n        src: dataUri,\n        alt: props.alt,\n        width: size.width\n      }, (0, _defineProperty2.default)(_attrs, \"\".concat(isLazy ? 'data-' : '', \"srcset\"), srcset.join(', ')), (0, _defineProperty2.default)(_attrs, \"\".concat(isLazy ? 'data-' : '', \"sizes\"), sizes), (0, _defineProperty2.default)(_attrs, \"\".concat(isLazy ? 'data-' : '', \"src\"), src), _attrs)\n    })));\n\n    if (isLazy) {\n      var onMount = function onMount(el) {\n        if (!el) return;else if (!observer) loadImage(el);else observer.observe(el);\n      };\n\n      var onDestroy = function onDestroy(el) {\n        if (el && observer) observer.unobserve(el);\n      };\n\n      classNames.push('g-image--lazy');\n      classNames.push('g-image--loading');\n      noscriptClassNames.push('g-image--loaded');\n      parent.$once('hook:mounted', function () {\n        return onMount(parent.$refs[ref]);\n      });\n      parent.$once('hook:updated', function () {\n        return onMount(parent.$refs[ref]);\n      });\n      parent.$once('hook:beforeDestroy', function () {\n        return onDestroy(parent.$refs[ref]);\n      }); // must render as innerHTML to make hydration work\n\n      res.push(h('noscript', {\n        domProps: {\n          innerHTML: \"\" + \"<img src=\\\"\".concat(src, \"\\\" class=\\\"\").concat(noscriptClassNames.join(' '), \"\\\"\") + (size.width ? \" width=\\\"\".concat(size.width, \"\\\"\") : '') + (props.alt ? \" alt=\\\"\".concat(props.alt, \"\\\"\") : '') + \">\"\n        }\n      }));\n    }\n\n    return res;\n  }\n};\nexports.default = _default;\n\nfunction initImageObserver(router) {\n  if (observer) {\n    router.beforeEach(function (to, from, next) {\n      unobserve();\n      next();\n    });\n  }\n\n  router.afterEach(function (to, from) {\n    _vue.default.nextTick(function () {\n      return observe();\n    });\n  });\n}\n\nfunction observe() {\n  var selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '[data-src]';\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n  var images = context.querySelectorAll(selector);\n\n  if (observer) {\n    images.forEach(function (el) {\n      return !el.__vue__ && observer.observe(el);\n    });\n  } else {\n    Array.from(images).forEach(function (el) {\n      return !el.__vue__ && loadImage(el);\n    });\n  }\n}\n\nfunction unobserve() {\n  var selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '[data-src]';\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n\n  if (observer) {\n    context.querySelectorAll(selector).forEach(function (el) {\n      if (!el.__vue__) observer.unobserve(el);\n    });\n  }\n}\n\nfunction intersectionHandler(_ref2) {\n  var intersectionRatio = _ref2.intersectionRatio,\n      target = _ref2.target;\n\n  if (intersectionRatio > 0 && target.dataset.src) {\n    observer.unobserve(target);\n    loadImage(target);\n  }\n}\n\nfunction loadImage(el) {\n  el.onload = function () {\n    delete el.dataset.src;\n    delete el.dataset.srcset;\n    delete el.dataset.sizes;\n    delete el.onload;\n    el.classList.remove('g-image--loading');\n    el.classList.add('g-image--loaded');\n  };\n\n  el.src = el.dataset.src;\n  el.srcset = el.dataset.srcset;\n  el.sizes = el.dataset.sizes;\n}",{"version":3,"sources":["node_modules/gridsome/app/components/Image.js"],"names":["observer","caniuse","IntersectionObserver","intersectionHandler","functional","props","src","type","Object","String","required","width","height","fit","position","background","alt","immediate","quality","blur","render","h","data","parent","isDev","process","env","NODE_ENV","isLazy","classNames","class","concat","noscriptClassNames","slice","srcType","ref","key","res","sizes","dataUri","srcset","size","push","attrs","join","onMount","el","loadImage","observe","onDestroy","unobserve","$once","$refs","domProps","innerHTML","initImageObserver","router","beforeEach","to","from","next","afterEach","Vue","nextTick","selector","context","document","images","querySelectorAll","forEach","__vue__","Array","intersectionRatio","target","dataset","onload","classList","remove","add"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA,IAAMA,QAAQ,GAAGC,iBAAQC,oBAAR,GACb,0CAAeC,mBAAf,CADa,GAEb,IAFJ;eAIe;AACbC,EAAAA,UAAU,EAAE,IADC;AAGbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,GAAG,EAAE;AAAEC,MAAAA,IAAI,EAAE,CAACC,MAAD,EAASC,MAAT,CAAR;AAA0BC,MAAAA,QAAQ,EAAE;AAApC,KADA;AAELC,IAAAA,KAAK,EAAE;AAAEJ,MAAAA,IAAI,EAAEE;AAAR,KAFF;AAGLG,IAAAA,MAAM,EAAE;AAAEL,MAAAA,IAAI,EAAEE;AAAR,KAHH;AAILI,IAAAA,GAAG,EAAE;AAAEN,MAAAA,IAAI,EAAEE;AAAR,KAJA;AAKLK,IAAAA,QAAQ,EAAE;AAAEP,MAAAA,IAAI,EAAEE;AAAR,KALL;AAMLM,IAAAA,UAAU,EAAE;AAAER,MAAAA,IAAI,EAAEE;AAAR,KANP;AAOLO,IAAAA,GAAG,EAAE;AAAET,MAAAA,IAAI,EAAEE;AAAR,KAPA;AAQLQ,IAAAA,SAAS,EAAE;AAAEV,MAAAA,IAAI,EAAE;AAAR,KARN;AASLW,IAAAA,OAAO,EAAE;AAAEX,MAAAA,IAAI,EAAEE;AAAR,KATJ;AAULU,IAAAA,IAAI,EAAE;AAAEZ,MAAAA,IAAI,EAAEE,MAAR,CAEN;AACA;AACA;AACA;AACA;AACA;;AAPM;AAVD,GAHM;AAuBbW,EAAAA,MAAM,EAAE,gBAACC,CAAD,QAAgC;AAAA;;AAAA,QAA1BC,IAA0B,QAA1BA,IAA0B;AAAA,QAApBjB,KAAoB,QAApBA,KAAoB;AAAA,QAAbkB,MAAa,QAAbA,MAAa;AACtC,QAAMC,KAAK,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAAvC;AACA,QAAMC,MAAM,GAAG,OAAOvB,KAAK,CAACY,SAAb,KAA2B,WAA1C;AACA,QAAMY,UAAU,GAAG,CAACP,IAAI,CAACQ,KAAL,IAAc,EAAf,EAAmBC,MAAnB,CAA0B,CAAC,SAAD,CAA1B,CAAnB;AACA,QAAMC,kBAAkB,GAAGH,UAAU,CAACI,KAAX,EAA3B;AACA,QAAMC,OAAO,yBAAU7B,KAAK,CAACC,GAAhB,CAAb;AACA,QAAM6B,GAAG,GAAGb,IAAI,CAACa,GAAL,IAAYb,IAAI,CAACc,GAA7B;AACA,QAAMC,GAAG,GAAG,EAAZ;AAEA,QAAI/B,GAAG,GAAG,EAAV;AACA,QAAIgC,KAAK,GAAG,EAAZ;AACA,QAAIC,OAAO,GAAG,EAAd;AACA,QAAIC,MAAM,GAAG,EAAb;AACA,QAAIC,IAAI,GAAG;AAAE9B,MAAAA,KAAK,EAAEN,KAAK,CAACM;AAAf,KAAX;;AAEA,QAAIuB,OAAO,KAAK,QAAhB,EAA0B;AACxB5B,MAAAA,GAAG,GAAGD,KAAK,CAACC,GAAZ;AACD,KAFD,MAEO,IAAI4B,OAAO,KAAK,QAAhB,EAA0B;AAC/B5B,MAAAA,GAAG,GAAGD,KAAK,CAACC,GAAN,CAAUA,GAAhB;AACA,UAAID,KAAK,CAACC,GAAN,CAAUkC,MAAd,EAAsBA,MAAM,GAAGnC,KAAK,CAACC,GAAN,CAAUkC,MAAnB;AACtB,UAAInC,KAAK,CAACC,GAAN,CAAUgC,KAAd,EAAqBA,KAAK,GAAGjC,KAAK,CAACC,GAAN,CAAUgC,KAAlB;AACrB,UAAIjC,KAAK,CAACC,GAAN,CAAUmC,IAAd,EAAoBA,IAAI,GAAGpC,KAAK,CAACC,GAAN,CAAUmC,IAAjB;AACpB,UAAIpC,KAAK,CAACC,GAAN,CAAUiC,OAAd,EAAuBA,OAAO,GAAGlC,KAAK,CAACC,GAAN,CAAUiC,OAApB;AACxB;;AAEDF,IAAAA,GAAG,CAACK,IAAJ,CAASrB,CAAC,CAAC,KAAD,kCACLC,IADK;AAERa,MAAAA,GAAG,EAAHA,GAFQ;AAGRL,MAAAA,KAAK,EAAED,UAHC;AAIRc,MAAAA,KAAK;AACHrC,QAAAA,GAAG,EAAEiC,OADF;AAEHvB,QAAAA,GAAG,EAAEX,KAAK,CAACW,GAFR;AAGHL,QAAAA,KAAK,EAAE8B,IAAI,CAAC9B;AAHT,yDAICiB,MAAM,GAAG,OAAH,GAAa,EAJpB,aAIiCY,MAAM,CAACI,IAAP,CAAY,IAAZ,CAJjC,mDAKChB,MAAM,GAAG,OAAH,GAAa,EALpB,YAKgCU,KALhC,mDAMCV,MAAM,GAAG,OAAH,GAAa,EANpB,UAM8BtB,GAN9B;AAJG,OAAV;;AAcA,QAAIsB,MAAJ,EAAY;AACV,UAAMiB,OAAO,GAAG,SAAVA,OAAU,CAAAC,EAAE,EAAI;AACpB,YAAI,CAACA,EAAL,EAAS,OAAT,KACK,IAAI,CAAC9C,QAAL,EAAe+C,SAAS,CAACD,EAAD,CAAT,CAAf,KACA9C,QAAQ,CAACgD,OAAT,CAAiBF,EAAjB;AACN,OAJD;;AAMA,UAAMG,SAAS,GAAG,SAAZA,SAAY,CAAAH,EAAE,EAAI;AACtB,YAAIA,EAAE,IAAI9C,QAAV,EAAoBA,QAAQ,CAACkD,SAAT,CAAmBJ,EAAnB;AACrB,OAFD;;AAIAjB,MAAAA,UAAU,CAACa,IAAX,CAAgB,eAAhB;AACAb,MAAAA,UAAU,CAACa,IAAX,CAAgB,kBAAhB;AACAV,MAAAA,kBAAkB,CAACU,IAAnB,CAAwB,iBAAxB;AAEAnB,MAAAA,MAAM,CAAC4B,KAAP,CAAa,cAAb,EAA6B;AAAA,eAAMN,OAAO,CAACtB,MAAM,CAAC6B,KAAP,CAAajB,GAAb,CAAD,CAAb;AAAA,OAA7B;AACAZ,MAAAA,MAAM,CAAC4B,KAAP,CAAa,cAAb,EAA6B;AAAA,eAAMN,OAAO,CAACtB,MAAM,CAAC6B,KAAP,CAAajB,GAAb,CAAD,CAAb;AAAA,OAA7B;AACAZ,MAAAA,MAAM,CAAC4B,KAAP,CAAa,oBAAb,EAAmC;AAAA,eAAMF,SAAS,CAAC1B,MAAM,CAAC6B,KAAP,CAAajB,GAAb,CAAD,CAAf;AAAA,OAAnC,EAjBU,CAmBV;;AACAE,MAAAA,GAAG,CAACK,IAAJ,CAASrB,CAAC,CAAC,UAAD,EAAa;AACrBgC,QAAAA,QAAQ,EAAE;AACRC,UAAAA,SAAS,EAAE,0BACIhD,GADJ,wBACmB0B,kBAAkB,CAACY,IAAnB,CAAwB,GAAxB,CADnB,WAERH,IAAI,CAAC9B,KAAL,sBAAwB8B,IAAI,CAAC9B,KAA7B,UAAuC,EAF/B,KAGRN,KAAK,CAACW,GAAN,oBAAqBX,KAAK,CAACW,GAA3B,UAAoC,EAH5B;AADH;AADW,OAAb,CAAV;AASD;;AAED,WAAOqB,GAAP;AACD;AA9FY,C;;;AAiGR,SAASkB,iBAAT,CAA4BC,MAA5B,EAAoC;AACzC,MAAIxD,QAAJ,EAAc;AACZwD,IAAAA,MAAM,CAACC,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpCV,MAAAA,SAAS;AACTU,MAAAA,IAAI;AACL,KAHD;AAID;;AAEDJ,EAAAA,MAAM,CAACK,SAAP,CAAiB,UAACH,EAAD,EAAKC,IAAL,EAAc;AAC7BG,iBAAIC,QAAJ,CAAa;AAAA,aAAMf,OAAO,EAAb;AAAA,KAAb;AACD,GAFD;AAGD;;AAEM,SAASA,OAAT,GAA+D;AAAA,MAA7CgB,QAA6C,uEAAlC,YAAkC;AAAA,MAApBC,OAAoB,uEAAVC,QAAU;AACpE,MAAMC,MAAM,GAAGF,OAAO,CAACG,gBAAR,CAAyBJ,QAAzB,CAAf;;AAEA,MAAIhE,QAAJ,EAAc;AACZmE,IAAAA,MAAM,CAACE,OAAP,CAAe,UAAAvB,EAAE;AAAA,aAAI,CAACA,EAAE,CAACwB,OAAJ,IAAetE,QAAQ,CAACgD,OAAT,CAAiBF,EAAjB,CAAnB;AAAA,KAAjB;AACD,GAFD,MAEO;AACLyB,IAAAA,KAAK,CAACZ,IAAN,CAAWQ,MAAX,EAAmBE,OAAnB,CAA2B,UAAAvB,EAAE;AAAA,aAAI,CAACA,EAAE,CAACwB,OAAJ,IAAevB,SAAS,CAACD,EAAD,CAA5B;AAAA,KAA7B;AACD;AACF;;AAEM,SAASI,SAAT,GAAiE;AAAA,MAA7Cc,QAA6C,uEAAlC,YAAkC;AAAA,MAApBC,OAAoB,uEAAVC,QAAU;;AACtE,MAAIlE,QAAJ,EAAc;AACZiE,IAAAA,OAAO,CAACG,gBAAR,CAAyBJ,QAAzB,EAAmCK,OAAnC,CAA2C,UAAAvB,EAAE,EAAI;AAC/C,UAAI,CAACA,EAAE,CAACwB,OAAR,EAAiBtE,QAAQ,CAACkD,SAAT,CAAmBJ,EAAnB;AAClB,KAFD;AAGD;AACF;;AAED,SAAS3C,mBAAT,QAA6D;AAAA,MAA7BqE,iBAA6B,SAA7BA,iBAA6B;AAAA,MAAVC,MAAU,SAAVA,MAAU;;AAC3D,MAAID,iBAAiB,GAAG,CAApB,IAAyBC,MAAM,CAACC,OAAP,CAAepE,GAA5C,EAAiD;AAC/CN,IAAAA,QAAQ,CAACkD,SAAT,CAAmBuB,MAAnB;AACA1B,IAAAA,SAAS,CAAC0B,MAAD,CAAT;AACD;AACF;;AAED,SAAS1B,SAAT,CAAoBD,EAApB,EAAwB;AACtBA,EAAAA,EAAE,CAAC6B,MAAH,GAAY,YAAY;AACtB,WAAO7B,EAAE,CAAC4B,OAAH,CAAWpE,GAAlB;AACA,WAAOwC,EAAE,CAAC4B,OAAH,CAAWlC,MAAlB;AACA,WAAOM,EAAE,CAAC4B,OAAH,CAAWpC,KAAlB;AACA,WAAOQ,EAAE,CAAC6B,MAAV;AAEA7B,IAAAA,EAAE,CAAC8B,SAAH,CAAaC,MAAb,CAAoB,kBAApB;AACA/B,IAAAA,EAAE,CAAC8B,SAAH,CAAaE,GAAb,CAAiB,iBAAjB;AACD,GARD;;AAUAhC,EAAAA,EAAE,CAACxC,GAAH,GAASwC,EAAE,CAAC4B,OAAH,CAAWpE,GAApB;AACAwC,EAAAA,EAAE,CAACN,MAAH,GAAYM,EAAE,CAAC4B,OAAH,CAAWlC,MAAvB;AACAM,EAAAA,EAAE,CAACR,KAAH,GAAWQ,EAAE,CAAC4B,OAAH,CAAWpC,KAAtB;AACD","sourceRoot":"/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3","sourcesContent":["import Vue from 'vue'\nimport caniuse from '../utils/caniuse'\nimport { createObserver } from '../utils/intersectionObserver'\n\nconst observer = caniuse.IntersectionObserver\n  ? createObserver(intersectionHandler)\n  : null\n\nexport default {\n  functional: true,\n\n  props: {\n    src: { type: [Object, String], required: true },\n    width: { type: String },\n    height: { type: String },\n    fit: { type: String },\n    position: { type: String },\n    background: { type: String },\n    alt: { type: String },\n    immediate: { type: true },\n    quality: { type: String },\n    blur: { type: String }\n\n    // responsive: true\n    // grayscale: false\n    // duotone: false\n    // rotate: 0\n    // transition-name?\n    // transition-duration?\n  },\n\n  render: (h, { data, props, parent }) => {\n    const isDev = process.env.NODE_ENV === 'development'\n    const isLazy = typeof props.immediate === 'undefined'\n    const classNames = (data.class || []).concat(['g-image'])\n    const noscriptClassNames = classNames.slice()\n    const srcType = typeof props.src\n    const ref = data.ref || data.key\n    const res = []\n\n    let src = ''\n    let sizes = ''\n    let dataUri = ''\n    let srcset = []\n    let size = { width: props.width }\n\n    if (srcType === 'string') {\n      src = props.src\n    } else if (srcType === 'object') {\n      src = props.src.src\n      if (props.src.srcset) srcset = props.src.srcset\n      if (props.src.sizes) sizes = props.src.sizes\n      if (props.src.size) size = props.src.size\n      if (props.src.dataUri) dataUri = props.src.dataUri\n    }\n\n    res.push(h('img', {\n      ...data,\n      ref,\n      class: classNames,\n      attrs: {\n        src: dataUri,\n        alt: props.alt,\n        width: size.width,\n        [`${isLazy ? 'data-' : ''}srcset`]: srcset.join(', '),\n        [`${isLazy ? 'data-' : ''}sizes`]: sizes,\n        [`${isLazy ? 'data-' : ''}src`]: src\n      }\n    }))\n\n    if (isLazy) {\n      const onMount = el => {\n        if (!el) return\n        else if (!observer) loadImage(el)\n        else observer.observe(el)\n      }\n\n      const onDestroy = el => {\n        if (el && observer) observer.unobserve(el)\n      }\n\n      classNames.push('g-image--lazy')\n      classNames.push('g-image--loading')\n      noscriptClassNames.push('g-image--loaded')\n\n      parent.$once('hook:mounted', () => onMount(parent.$refs[ref]))\n      parent.$once('hook:updated', () => onMount(parent.$refs[ref]))\n      parent.$once('hook:beforeDestroy', () => onDestroy(parent.$refs[ref]))\n\n      // must render as innerHTML to make hydration work\n      res.push(h('noscript', {\n        domProps: {\n          innerHTML: `` + \n            `<img src=\"${src}\" class=\"${noscriptClassNames.join(' ')}\"` +\n            (size.width ? ` width=\"${size.width}\"`: '') +\n            (props.alt ? ` alt=\"${props.alt}\"` : '') +\n            `>`\n        }\n      }))\n    }\n\n    return res\n  }\n}\n\nexport function initImageObserver (router) {\n  if (observer) {\n    router.beforeEach((to, from, next) => {\n      unobserve()\n      next()\n    })\n  }\n\n  router.afterEach((to, from) => {\n    Vue.nextTick(() => observe())\n  })\n}\n\nexport function observe (selector = '[data-src]', context = document) {\n  const images = context.querySelectorAll(selector)\n\n  if (observer) {\n    images.forEach(el => !el.__vue__ && observer.observe(el))\n  } else {\n    Array.from(images).forEach(el => !el.__vue__ && loadImage(el))\n  }\n}\n\nexport function unobserve (selector = '[data-src]', context = document) {\n  if (observer) {\n    context.querySelectorAll(selector).forEach(el => {\n      if (!el.__vue__) observer.unobserve(el)\n    })\n  }\n}\n\nfunction intersectionHandler ({ intersectionRatio, target }) {\n  if (intersectionRatio > 0 && target.dataset.src) {\n    observer.unobserve(target)\n    loadImage(target)\n  }\n}\n\nfunction loadImage (el) {\n  el.onload = function () {\n    delete el.dataset.src\n    delete el.dataset.srcset\n    delete el.dataset.sizes\n    delete el.onload\n\n    el.classList.remove('g-image--loading')\n    el.classList.add('g-image--loaded')\n  }\n\n  el.src = el.dataset.src\n  el.srcset = el.dataset.srcset\n  el.sizes = el.dataset.sizes\n}\n"]}]}