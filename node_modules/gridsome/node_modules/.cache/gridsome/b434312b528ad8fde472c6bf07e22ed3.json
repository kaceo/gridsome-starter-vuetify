{"remainingRequest":"/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3/node_modules/babel-loader/lib/index.js??ref--1-1!/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3/node_modules/gridsome/app/page-query/fetch.js","dependencies":[{"path":"/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3/node_modules/gridsome/app/page-query/fetch.js","mtime":1547622922997},{"path":"/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3/node_modules/cache-loader/dist/cjs.js","mtime":1544326630000},{"path":"/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3/node_modules/babel-loader/lib/index.js","mtime":1547551806025}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));\n\nvar _cache = _interopRequireDefault(require(\"./cache\"));\n\nvar _config = _interopRequireDefault(require(\"~/.temp/config.js\"));\n\nvar _helpers = require(\"../utils/helpers\");\n\n/* global GRAPHQL_ENDPOINT, GRIDSOME_MODE, GRIDSOME_DATA_DIR */\nvar _default = function _default(route, query) {\n  if (GRIDSOME_MODE === 'serve') {\n    var variables = (0, _objectSpread2.default)({}, route.params, {\n      path: route.path\n    });\n    return new Promise(function (resolve) {\n      fetch(GRAPHQL_ENDPOINT, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          query: query,\n          variables: variables\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        _cache.default.set(route.path, res.data);\n\n        resolve(res);\n      });\n    });\n  } else if (GRIDSOME_MODE === 'static') {\n    return new Promise(function (resolve) {\n      var re = new RegExp(\"^\".concat(_config.default.pathPrefix));\n      var routePath = (0, _helpers.unslash)(route.path.replace(re, '/'));\n      var filename = !routePath ? '/index.json' : \"/\".concat(routePath, \".json\");\n      import(\n      /* webpackChunkName: \"data/\" */\n      \"\".concat(GRIDSOME_DATA_DIR).concat(filename)).then(function (res) {\n        _cache.default.set(route.path, res.default.data);\n\n        resolve(res);\n      });\n    });\n  }\n};\n\nexports.default = _default;",{"version":3,"sources":["node_modules/gridsome/app/page-query/fetch.js"],"names":["route","query","GRIDSOME_MODE","variables","params","path","Promise","resolve","fetch","GRAPHQL_ENDPOINT","method","headers","body","JSON","stringify","then","res","json","cache","set","data","re","RegExp","config","pathPrefix","routePath","replace","filename","GRIDSOME_DATA_DIR","default"],"mappings":";;;;;;;;;;;AAEA;;AACA;;AACA;;AAJA;eAMe,kBAACA,KAAD,EAAQC,KAAR,EAAkB;AAC/B,MAAIC,aAAa,KAAK,OAAtB,EAA+B;AAC7B,QAAMC,SAAS,mCAAQH,KAAK,CAACI,MAAd;AAAsBC,MAAAA,IAAI,EAAEL,KAAK,CAACK;AAAlC,MAAf;AAEA,WAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5BC,MAAAA,KAAK,CAACC,gBAAD,EAAmB;AACtBC,QAAAA,MAAM,EAAE,MADc;AAEtBC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB,SAFa;AAGtBC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEb,UAAAA,KAAK,EAALA,KAAF;AAASE,UAAAA,SAAS,EAATA;AAAT,SAAf;AAHgB,OAAnB,CAAL,CAKGY,IALH,CAKQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OALX,EAMGF,IANH,CAMQ,UAAAC,GAAG,EAAI;AACXE,uBAAMC,GAAN,CAAUnB,KAAK,CAACK,IAAhB,EAAsBW,GAAG,CAACI,IAA1B;;AACAb,QAAAA,OAAO,CAACS,GAAD,CAAP;AACD,OATH;AAUD,KAXM,CAAP;AAYD,GAfD,MAeO,IAAId,aAAa,KAAK,QAAtB,EAAgC;AACrC,WAAO,IAAII,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B,UAAMc,EAAE,GAAG,IAAIC,MAAJ,YAAeC,gBAAOC,UAAtB,EAAX;AACA,UAAMC,SAAS,GAAG,sBAAQzB,KAAK,CAACK,IAAN,CAAWqB,OAAX,CAAmBL,EAAnB,EAAuB,GAAvB,CAAR,CAAlB;AACA,UAAMM,QAAQ,GAAG,CAACF,SAAD,GAAa,aAAb,cAAiCA,SAAjC,UAAjB;AAEA;AAAO;AAAP,gBAA0CG,iBAA1C,SAA8DD,QAA9D,GAA0EZ,IAA1E,CAA+E,UAAAC,GAAG,EAAI;AACpFE,uBAAMC,GAAN,CAAUnB,KAAK,CAACK,IAAhB,EAAsBW,GAAG,CAACa,OAAJ,CAAYT,IAAlC;;AACAb,QAAAA,OAAO,CAACS,GAAD,CAAP;AACD,OAHD;AAID,KATM,CAAP;AAUD;AACF,C","sourceRoot":"/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3","sourcesContent":["/* global GRAPHQL_ENDPOINT, GRIDSOME_MODE, GRIDSOME_DATA_DIR */\n\nimport cache from './cache'\nimport config from '~/.temp/config.js'\nimport { unslash } from '../utils/helpers'\n\nexport default (route, query) => {\n  if (GRIDSOME_MODE === 'serve') {\n    const variables = { ...route.params, path: route.path }\n\n    return new Promise(resolve => {\n      fetch(GRAPHQL_ENDPOINT, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ query, variables })\n      })\n        .then(res => res.json())\n        .then(res => {\n          cache.set(route.path, res.data)\n          resolve(res)\n        })\n    })\n  } else if (GRIDSOME_MODE === 'static') {\n    return new Promise(resolve => {\n      const re = new RegExp(`^${config.pathPrefix}`)\n      const routePath = unslash(route.path.replace(re, '/'))\n      const filename = !routePath ? '/index.json' : `/${routePath}.json`\n\n      import(/* webpackChunkName: \"data/\" */ `${GRIDSOME_DATA_DIR}${filename}`).then(res => {\n        cache.set(route.path, res.default.data)\n        resolve(res)\n      })\n    })\n  }\n}\n"]}]}