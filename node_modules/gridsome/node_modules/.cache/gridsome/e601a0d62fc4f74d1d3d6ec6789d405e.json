{"remainingRequest":"/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3/node_modules/babel-loader/lib/index.js??ref--1-1!/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3/node_modules/gridsome/app/page-query/dev.js","dependencies":[{"path":"/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3/node_modules/gridsome/app/page-query/dev.js","mtime":1547622922997},{"path":"/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3/node_modules/cache-loader/dist/cjs.js","mtime":1544326630000},{"path":"/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3/node_modules/babel-loader/lib/index.js","mtime":1547551806025}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _vue = _interopRequireDefault(require(\"vue\"));\n\nvar _sock = _interopRequireDefault(require(\"./sock\"));\n\nvar _fetch = _interopRequireDefault(require(\"./fetch\"));\n\nvar _Image = require(\"../components/Image\");\n\nvar active = {};\n\n_sock.default.onmessage = function (message) {\n  var data = JSON.parse(message.data);\n\n  switch (data.type) {\n    case 'updateQuery':\n      if (active.hasOwnProperty(data.file)) {\n        active[data.file].options.__pageQuery = data.query;\n      }\n\n      break;\n  }\n\n  var _loop = function _loop(file) {\n    var _active$file = active[file],\n        options = _active$file.options,\n        vm = _active$file.vm;\n    (0, _Image.unobserve)(undefined, vm.$el);\n    (0, _fetch.default)(vm.$route, options.__pageQuery).then(function () {\n      _vue.default.nextTick(function () {\n        return (0, _Image.observe)(undefined, vm.$el);\n      });\n    });\n  };\n\n  for (var file in active) {\n    _loop(file);\n  }\n};\n\nvar _default = function _default(_ref) {\n  var options = _ref.options;\n  if (options.__pageQueryDev) return;\n  var merge = _vue.default.config.optionMergeStrategies;\n\n  var slash = function slash(string) {\n    return string.replace(/\\\\+/g, '/');\n  };\n\n  options.mounted = merge.mounted([function () {\n    active[slash(options.__file)] = {\n      options: options,\n      vm: this\n    };\n  }], options.mounted);\n  options.beforeDestroy = merge.beforeDestroy([function () {\n    delete active[slash(options.__file)];\n  }], options.beforeDestroy);\n  options.__pageQueryDev = true;\n};\n\nexports.default = _default;",{"version":3,"sources":["node_modules/gridsome/app/page-query/dev.js"],"names":["active","sock","onmessage","message","data","JSON","parse","type","hasOwnProperty","file","options","__pageQuery","query","vm","undefined","$el","$route","then","Vue","nextTick","__pageQueryDev","merge","config","optionMergeStrategies","slash","string","replace","mounted","__file","beforeDestroy"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA,IAAMA,MAAM,GAAG,EAAf;;AAEAC,cAAKC,SAAL,GAAiB,UAAAC,OAAO,EAAI;AAC1B,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWH,OAAO,CAACC,IAAnB,CAAb;;AAEA,UAAQA,IAAI,CAACG,IAAb;AACE,SAAK,aAAL;AACE,UAAIP,MAAM,CAACQ,cAAP,CAAsBJ,IAAI,CAACK,IAA3B,CAAJ,EAAsC;AACpCT,QAAAA,MAAM,CAACI,IAAI,CAACK,IAAN,CAAN,CAAkBC,OAAlB,CAA0BC,WAA1B,GAAwCP,IAAI,CAACQ,KAA7C;AACD;;AAED;AANJ;;AAH0B,6BAYfH,IAZe;AAAA,uBAaAT,MAAM,CAACS,IAAD,CAbN;AAAA,QAahBC,OAbgB,gBAahBA,OAbgB;AAAA,QAaPG,EAbO,gBAaPA,EAbO;AAcxB,0BAAUC,SAAV,EAAqBD,EAAE,CAACE,GAAxB;AACA,wBAAMF,EAAE,CAACG,MAAT,EAAiBN,OAAO,CAACC,WAAzB,EAAsCM,IAAtC,CAA2C,YAAM;AAC/CC,mBAAIC,QAAJ,CAAa;AAAA,eAAM,oBAAQL,SAAR,EAAmBD,EAAE,CAACE,GAAtB,CAAN;AAAA,OAAb;AACD,KAFD;AAfwB;;AAY1B,OAAK,IAAMN,IAAX,IAAmBT,MAAnB,EAA2B;AAAA,UAAhBS,IAAgB;AAM1B;AACF,CAnBD;;eAqBe,wBAAiB;AAAA,MAAdC,OAAc,QAAdA,OAAc;AAC9B,MAAIA,OAAO,CAACU,cAAZ,EAA4B;AAE5B,MAAMC,KAAK,GAAGH,aAAII,MAAJ,CAAWC,qBAAzB;;AACA,MAAMC,KAAK,GAAG,SAARA,KAAQ,CAAAC,MAAM;AAAA,WAAIA,MAAM,CAACC,OAAP,CAAe,MAAf,EAAuB,GAAvB,CAAJ;AAAA,GAApB;;AAEAhB,EAAAA,OAAO,CAACiB,OAAR,GAAkBN,KAAK,CAACM,OAAN,CAAc,CAAC,YAAY;AAC3C3B,IAAAA,MAAM,CAACwB,KAAK,CAACd,OAAO,CAACkB,MAAT,CAAN,CAAN,GAAgC;AAAElB,MAAAA,OAAO,EAAPA,OAAF;AAAWG,MAAAA,EAAE,EAAE;AAAf,KAAhC;AACD,GAF+B,CAAd,EAEdH,OAAO,CAACiB,OAFM,CAAlB;AAIAjB,EAAAA,OAAO,CAACmB,aAAR,GAAwBR,KAAK,CAACQ,aAAN,CAAoB,CAAC,YAAY;AACvD,WAAO7B,MAAM,CAACwB,KAAK,CAACd,OAAO,CAACkB,MAAT,CAAN,CAAb;AACD,GAF2C,CAApB,EAEpBlB,OAAO,CAACmB,aAFY,CAAxB;AAIAnB,EAAAA,OAAO,CAACU,cAAR,GAAyB,IAAzB;AACD,C","sourceRoot":"/srv/dev-disk-by-label-NAS15T2017/code/k/test/g3","sourcesContent":["import Vue from 'vue'\nimport sock from './sock'\nimport fetch from './fetch'\nimport { unobserve, observe } from '../components/Image'\n\nconst active = {}\n\nsock.onmessage = message => {\n  const data = JSON.parse(message.data)\n\n  switch (data.type) {\n    case 'updateQuery':\n      if (active.hasOwnProperty(data.file)) {\n        active[data.file].options.__pageQuery = data.query\n      }\n\n      break\n  }\n\n  for (const file in active) {\n    const { options, vm } = active[file]\n    unobserve(undefined, vm.$el)\n    fetch(vm.$route, options.__pageQuery).then(() => {\n      Vue.nextTick(() => observe(undefined, vm.$el))\n    })\n  }\n}\n\nexport default ({ options }) => {\n  if (options.__pageQueryDev) return\n\n  const merge = Vue.config.optionMergeStrategies\n  const slash = string => string.replace(/\\\\+/g, '/')\n\n  options.mounted = merge.mounted([function () {\n    active[slash(options.__file)] = { options, vm: this }\n  }], options.mounted)\n\n  options.beforeDestroy = merge.beforeDestroy([function () {\n    delete active[slash(options.__file)]\n  }], options.beforeDestroy)\n\n  options.__pageQueryDev = true\n}\n"]}]}